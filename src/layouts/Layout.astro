---
import "../styles/global.css";
import Header from "../components/Header.astro";

interface Props {
    title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es" class="scroll-smooth dark">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>
        <meta
            name="description"
            content="Stickers que respiran. Tecnología fotocatalítica para un aire más limpio."
        />

        <!-- Google Fonts: Outfit -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&display=swap"
            rel="stylesheet"
        />
    </head>
    <body
        class="bg-void text-body overflow-x-hidden selection:bg-primary selection:text-white"
    >
        <Header />

        <!-- Ambient Background Glows (CSS) -->
        <div
            class="fixed top-[30%] md:top-[-20%] left-[-20%] md:left-[-10%] w-[80vw] md:w-[50vw] h-[80vw] md:h-[50vw] rounded-full bg-primary/20 blur-[80px] md:blur-[120px] pointer-events-none z-0 mix-blend-screen transition-all duration-700"
        >
        </div>
        <div
            class="fixed top-[40%] md:top-[-20%] right-[-20%] md:right-[-10%] w-[80vw] md:w-[50vw] h-[80vw] md:h-[50vw] rounded-full bg-secondary/20 blur-[80px] md:blur-[120px] pointer-events-none z-0 mix-blend-screen transition-all duration-700"
        >
        </div>

        <!-- Global Noise Texture (Background) -->
        <div
            class="fixed inset-0 z-0 pointer-events-none opacity-[0.4] mix-blend-overlay"
        >
            <div
                class="absolute inset-0 bg-repeat w-full h-full animate-noise"
                style="background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%221.5%22 numOctaves=%222%22 stitchTiles=%22stitch%22/%3E%3CfeColorMatrix type=%22saturate%22 values=%220%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E');"
            >
            </div>
        </div>

        <main class="relative z-10">
            <slot />
        </main>
        <script>
            import Lenis from "lenis";
            import gsap from "gsap";
            import { ScrollTrigger } from "gsap/ScrollTrigger";

            // Initialize Lenis
            const lenis = new Lenis({
                lerp: 0.1,
                smoothWheel: true,
            });

            // Synchronize Lenis with GSAP ScrollTrigger
            lenis.on("scroll", ScrollTrigger.update);

            gsap.ticker.add((time) => {
                lenis.raf(time * 1000);
            });

            gsap.ticker.lagSmoothing(0);
        </script>
    </body>

    <style is:global>
        :root {
            --font-sans: "Outfit", sans-serif;
        }
        html {
            font-family: var(--font-sans);
        }

        /* Recommended CSS for Lenis */
        html.lenis,
        html.lenis body {
            height: auto;
        }
        .lenis.lenis-smooth {
            scroll-behavior: auto !important;
        }
        .lenis.lenis-smooth [data-lenis-prevent] {
            overscroll-behavior: contain;
        }
        .lenis.lenis-stopped {
            overflow: hidden;
        }
        .lenis.lenis-scrolling iframe {
            pointer-events: none;
        }

        /* Noise Animation */
        @keyframes noise-shift {
            0% {
                background-position: 0px 0px;
            }
            10% {
                background-position: -5% -5%;
            }
            20% {
                background-position: -10% 5%;
            }
            30% {
                background-position: 5% -10%;
            }
            40% {
                background-position: -5% 15%;
            }
            50% {
                background-position: -10% 5%;
            }
            60% {
                background-position: 15% 0px;
            }
            70% {
                background-position: 0px 10%;
            }
            80% {
                background-position: -15% 0px;
            }
            90% {
                background-position: 10% 5%;
            }
            100% {
                background-position: 5% 0px;
            }
        }

        .animate-noise {
            animation: noise-shift 0.2s steps(1) infinite;
        }
    </style>
</html>
